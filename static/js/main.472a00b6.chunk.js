(this["webpackJsonpmay-friends"]=this["webpackJsonpmay-friends"]||[]).push([[0],{22:function(t,e,s){},32:function(t,e,s){},35:function(t,e,s){},38:function(t,e,s){},42:function(t,e,s){"use strict";s.r(e);var a=s(0),o=s(1),i=s.n(o),c=s(15),n=s.n(c),r=(s(32),s(9)),l=s(10),d=s(12),p=s(11),h=s(2),u=s(5),b=s.n(u),m=s(24),j=s.n(m),f=s(16),v=s(3),O=s(17),x=[{title:"\u0438\u0449\u0443 \u0434\u0440\u0443\u0433\u0430",color:"#7DC5D5",description:"\u041f\u043e\u0438\u0441\u043a \u0434\u0440\u0443\u0437\u0435\u0439",icon:"fas fa-user-friends",form:[{type:"textarea",title:"\u041e \u0441\u0435\u0431\u0435",hint:"\u0418\u043d\u0442\u0435\u0440\u0435\u0441\u044b, \u0445\u043e\u0431\u0431\u0438, \u0441\u0435\u0440\u0438\u0430\u043b\u044b, \u043c\u0443\u0437\u044b\u043a\u0430 (\u043a\u0440\u0430\u0442\u043a\u043e)",rows:5},{type:"textarea",title:"\u041a\u043e\u0433\u043e \u0445\u043e\u0447\u0443 \u043d\u0430\u0439\u0442\u0438",hint:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",rows:4},{type:"input",title:"\u0413\u043e\u0440\u043e\u0434",hint:"(\u043d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435)"},{type:"input",title:"\u0417\u043d\u0430\u043a \u0437\u043e\u0434\u0438\u0430\u043a\u0430",hint:"(\u043d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435)"},{type:"input",title:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442",hint:"(\u043d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435)"},{type:"input",title:"\u041b\u044e\u0431\u0438\u043c\u0430\u044f \u043f\u0435\u0441\u043d\u044f",hint:"(\u043d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435)"}]},{title:"\u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u0444\u0438\u043b\u044c\u043c?",color:"#C1BEFF",description:"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441 \u043a\u0435\u043c-\u043d\u0438\u0431\u0443\u0434\u044c \u0444\u0438\u043b\u044c\u043c/\u043c\u0443\u043b\u044c\u0442\u0444\u0438\u043b\u044c\u043c/\u0441\u0435\u0440\u0438\u0430\u043b \u0447\u0435\u0440\u0435\u0437 \u0441\u0430\u0439\u0442 \u0441\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u043e\u0433\u043e \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430",icon:"fas fa-video",form:[{type:"input",title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0444\u0438\u043b\u044c\u043c\u0430",hint:"\u0427\u0442\u043e \u0445\u043e\u0442\u0435\u043b \u0431\u044b \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c?"},{type:"textarea",title:"",hint:"P.S.",rows:3}]},{title:"\u043f\u043e\u0431\u043e\u043b\u0442\u0430\u0435\u043c?",color:"#FFCDFA",description:"\u041f\u043e\u0433\u043e\u0432\u043e\u0440\u0438\u0442\u044c \u043d\u0430 \u043a\u0430\u043a\u0443\u044e-\u043b\u0438\u0431\u043e \u0442\u0435\u043c\u0443",icon:"fas fa-comment-dots",form:[{type:"textarea",title:"\u0422\u0435\u043c\u0430",hint:"\u041e \u0447\u0435\u043c \u0445\u043e\u0447\u0435\u0448\u044c \u043f\u043e\u0433\u043e\u0432\u043e\u0440\u0438\u0442\u044c?",rows:4},{type:"input",title:"",hint:"P.S."}]},{title:"\u043f\u043e\u0438\u0433\u0440\u0430\u0435\u043c?",color:"#FFF197",description:"\u041d\u0430\u0439\u0442\u0438 \u0442\u043e\u0433\u043e, \u0441 \u043a\u0435\u043c \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u0438\u0433\u0440\u0430\u0442\u044c \u0432\u043e \u0447\u0442\u043e-\u043d\u0438\u0431\u0443\u0434\u044c \u043f\u043e \u0441\u0435\u0442\u0438",icon:"fas fa-gamepad",form:[{type:"input",title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0438\u0433\u0440\u044b",hint:"\u0412\u043e \u0447\u0442\u043e \u0445\u043e\u0447\u0435\u0448\u044c \u043f\u043e\u0438\u0433\u0440\u0430\u0442\u044c?"},{type:"textarea",title:"",hint:"P.S.",rows:3}]},{title:"\u0438\u0434\u0435\u043c \u0433\u0443\u043b\u044f\u0442\u044c?",color:"#9DD8FF",description:"\u041d\u0430\u0439\u0442\u0438 \u0442\u043e\u0433\u043e, \u0441 \u043a\u0435\u043c \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u0433\u0443\u043b\u044f\u0442\u044c",icon:"fas fa-walking",form:[{type:"input",title:"\u0413\u043e\u0440\u043e\u0434",hint:"\u0413\u0434\u0435 \u0445\u043e\u0447\u0435\u0448\u044c \u043f\u043e\u0433\u0443\u043b\u044f\u0442\u044c?"},{type:"textarea",title:"\u041e \u0441\u0435\u0431\u0435",hint:"\u0420\u0430\u0441\u0441\u043a\u0430\u0436\u0438 \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u043e \u0441\u0435\u0431\u0435"},{type:"input",title:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442",hint:"\u0421\u043a\u043e\u043b\u044c\u043a\u043e \u0442\u0435\u0431\u0435 \u043b\u0435\u0442?"}]},{title:"\u0445\u043e\u0447\u0443 \u0441\u043f\u0440\u043e\u0441\u0438\u0442\u044c",color:"#FFB4A3",description:"\u0417\u0430\u0434\u0430\u0442\u044c \u0432\u043e\u043f\u0440\u043e\u0441 \u0438\u043b\u0438 \u043f\u043e\u043f\u0440\u043e\u0441\u0438\u0442\u044c \u0441\u043e\u0432\u0435\u0442",icon:"fas fa-question-circle",form:[{type:"textarea",title:"\u0412\u043e\u043f\u0440\u043e\u0441",hint:"\u041e \u0447\u0435\u043c \u0445\u043e\u0447\u0435\u0448\u044c \u0441\u043f\u0440\u043e\u0441\u0438\u0442\u044c?",rows:5},{type:"input",title:"",hint:"P.S."}]},{title:"\u0432\u0438\u0434\u0435\u043e-\u0447\u0430\u0442",color:"#BC92F8",description:"\u041f\u043e\u0431\u043e\u043b\u0442\u0430\u0442\u044c \u0441 \u043a\u0435\u043c-\u043d\u0438\u0431\u0443\u0434\u044c \u043f\u043e \u0432\u0438\u0434\u0435\u043e\u0441\u0432\u044f\u0437\u0438",icon:"fas fa-desktop",form:[{type:"textarea",title:"\u041e \u0441\u0435\u0431\u0435",hint:"\u0418\u043d\u0442\u0435\u0440\u0435\u0441\u044b, \u0445\u043e\u0431\u0431\u0438, \u0441\u0435\u0440\u0438\u0430\u043b\u044b, \u043c\u0443\u0437\u044b\u043a\u0430 (\u043a\u0440\u0430\u0442\u043a\u043e)",rows:5},{type:"input",title:"\u0421\u0435\u0440\u0432\u0438\u0441",hint:"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0434\u0438\u0441\u043a\u043e\u0440\u0434 \u0438\u043b\u0438 \u0432\u043a"},{type:"input",title:"\u0417\u043d\u0430\u043a \u0437\u043e\u0434\u0438\u0430\u043a\u0430",hint:"(\u043d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435)"},{type:"input",title:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442",hint:"(\u043d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435)"}]},{title:"\u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430",color:"#F887A0",description:"\u041f\u043e\u043f\u0440\u043e\u0441\u0438\u0442\u044c \u0441\u043e\u0432\u0435\u0442, \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0443 \u0438\u043b\u0438 \u043f\u043e\u043c\u043e\u0449\u044c",icon:"fas fa-heart",form:[{type:"textarea",title:"\u041e \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0435",hint:"\u0420\u0430\u0441\u0441\u043a\u0430\u0436\u0438, \u0447\u0442\u043e \u0442\u0435\u0431\u044f \u0432\u043e\u043b\u043d\u0443\u0435\u0442, \u043e \u0447\u0435\u043c \u0442\u044b \u0445\u043e\u0442\u0435\u043b \u0431\u044b \u043f\u043e\u0433\u043e\u0432\u043e\u0440\u0438\u0442\u044c?",rows:5},{type:"input",title:"",hint:"P.S."}]},{title:"\u0443\u0447\u0435\u0431\u0430",color:"#9AF892",description:"\u0421\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u0430\u044f \u043f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u043a\u0438 \u043a \u044d\u043a\u0437\u0430\u043c\u0435\u043d\u0430\u043c, \u043f\u043e\u043c\u043e\u0449\u044c \u0441 \u0434\u0437 \u0434\u0440\u0443\u0433 \u0434\u0440\u0443\u0433\u0443 \u0438 \u0442\u043e\u043c\u0443 \u043f\u043e\u0434\u043e\u0431\u043d\u043e\u0435",icon:"fas fa-graduation-cap",form:[{type:"textarea",title:"\u041e \u0441\u0435\u0431\u0435",hint:"\u0420\u0430\u0441\u0441\u043a\u0430\u0436\u0438 \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u043e \u0441\u0435\u0431\u0435",rows:4},{type:"textarea",title:"\u0427\u0435\u043c \u0437\u0430\u0439\u043c\u0435\u043c\u0441\u044f",hint:"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043f\u043e\u043c\u043e\u0449\u044c \u0441 \u0434\u0437 \u0438\u043b\u0438 \u043f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u043a\u0430 \u043a \u044d\u043a\u0437\u0430\u043c\u0435\u043d\u0430\u043c",rows:3},{type:"input",title:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442",hint:"(\u043d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435)"},{type:"input",title:"\u041a\u043b\u0430\u0441\u0441/\u043a\u0443\u0440\u0441",hint:"(\u043d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435)"},{type:"input",title:"\u041b\u044e\u0431\u0438\u043c\u044b\u0439 \u043f\u0440\u0435\u0434\u043c\u0435\u0442",hint:"(\u043d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435)"},{type:"input",title:"",hint:"P.S."}]},{title:"\u0441\u0430\u043c\u043e\u0440\u0430\u0437\u0432\u0438\u0442\u0438\u0435",color:"#F8DAB4",description:"\u0417\u0430\u043d\u0438\u043c\u0430\u0442\u044c\u0441\u044f \u0441\u0430\u043c\u043e\u0440\u0430\u0437\u0432\u0438\u0442\u0438\u0435\u043c \u0432\u043c\u0435\u0441\u0442\u0435",icon:"fas fa-apple-alt",form:[{type:"textarea",title:"\u0427\u0435\u043c \u0445\u043e\u0442\u0435\u043b \u0431\u044b \u0437\u0430\u043d\u0438\u043c\u0430\u0442\u044c\u0441\u044f",hint:"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0432\u044b\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u043f\u0440\u0438\u0432\u044b\u0447\u043a\u0443 \u0447\u0438\u0442\u0430\u0442\u044c \u043a\u043d\u0438\u0433\u0438 \u0438\u043b\u0438 \u0431\u0435\u0433\u0430\u0442\u044c \u043f\u043e \u0443\u0442\u0440\u0430\u043c",rows:3},{type:"textarea",title:"\u041e \u0441\u0435\u0431\u0435",hint:"\u0420\u0430\u0441\u0441\u043a\u0430\u0436\u0438 \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u043e \u0441\u0435\u0431\u0435",rows:4},{type:"input",title:"",hint:"P.S."}]},{title:"\u0431\u0443\u043c\u0430\u0436\u043d\u044b\u0435 \u043f\u0438\u0441\u044c\u043c\u0430",color:"#F3EDED",description:"\u041d\u0430\u0439\u0442\u0438 \u0434\u0440\u0443\u0433\u0430 \u043f\u043e \u043f\u0435\u0440\u0435\u043f\u0438\u0441\u043a\u0435, \u043f\u0438\u0441\u0430\u0442\u044c \u0434\u0440\u0443\u0433 \u0434\u0440\u0443\u0433\u0443 \u0431\u0443\u043c\u0430\u0436\u043d\u044b\u0435 \u043f\u0438\u0441\u044c\u043c\u0430 \u043e\u0442 \u0440\u0443\u043a\u0438",icon:"fas fa-envelope",form:[{type:"textarea",title:"\u041e \u0441\u0435\u0431\u0435",hint:"\u0420\u0430\u0441\u0441\u043a\u0430\u0436\u0438 \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u043e \u0441\u0435\u0431\u0435",rows:4},{type:"textarea",title:"\u0410\u0434\u0440\u0435\u0441",hint:"\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u043c \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0430\u0434\u0440\u0435\u0441 \u0432 \u043b\u0441",rows:2},{type:"input",title:"",hint:"P.S."}]}],k=s(26),y=(s(35),function(t){Object(d.a)(s,t);var e=Object(p.a)(s);function s(t){var a;return Object(r.a)(this,s),(a=e.call(this,t)).state={post:a.props.data,savedPosts:[],show:!1,like:!1},a.maxSavedPostsCount=50,a.topic_id=798,a.topicName="",a.token="f97761ee8a2f12188b1a52d0c7f149ddbeb68151e0dc71c91d945a04eac7f0d0aef3bb0cdbcfe5293ef47",a.group_id=140403026,a.likePost=a.likePost.bind(Object(h.a)(a)),a.getPostText=a.getPostText.bind(Object(h.a)(a)),a.savePostLike=a.savePostLike.bind(Object(h.a)(a)),a.isLiked=a.isLiked.bind(Object(h.a)(a)),a}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var t=this.isLiked();this.setState({show:!0,like:t})}},{key:"componentWillUnmount",value:function(){this.setState({show:!1})}},{key:"isLiked",value:function(){var t=this.props.data.id,e=this.props.savedPosts.includes("".concat(t));return e}},{key:"getPostText",value:function(){var t=this.props.data.text,e="";for(var s in t)t[s].length&&(e+="<b>".concat(s||"P.S.","</b>: ").concat(t[s],"<br/><br/>"));return e}},{key:"savePostLike",value:function(){var t=this.props.data,e=this.props.savedPosts;e.unshift(t.id),e.length>this.maxSavedPostsCount&&e.splice(e.length-1,1),b.a.send("VKWebAppStorageSet",{key:"may-friends",value:e.join(",")})}},{key:"likePost",value:function(){var t=this;if(!this.state.like){var e=this.props.data;b.a.send("VKWebAppCallAPIMethod",{method:"wall.createComment",params:{owner_id:"-"+this.group_id,post_id:this.topic_id,message:"like",from_group:this.group_id,reply_to_comment:e.id,v:"5.126",access_token:this.token}}).then((function(s){e.likes+=1,t.setState({like:!0,post:e}),t.savePostLike()}))}}},{key:"render",value:function(){var t=this,e=this.state.post,s=this.props.index,o=e.color,i=this.getPostText(),c=(new Date).toLocaleString("ru",{day:"numeric",weekday:"short"}),n=new Date(1e3*e.date).toLocaleString("ru",{day:"numeric",weekday:"short"});return Object(a.jsxs)("div",{children:[Object(a.jsx)(O.a,{in:this.state.show,timeout:5*s,children:function(s){return Object(a.jsxs)("div",{className:"postView",children:[Object(a.jsx)("div",{className:"postHeader-"+s,children:Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("a",{className:"linkStyle",href:e.url,target:"_blank",rel:"noopener noreferrer",children:Object(a.jsx)("img",{className:"postPhoto-"+s,src:e.photo,alt:"avatar",onClick:t.likePost})}),Object(a.jsxs)("div",{className:"col-6",children:[e.name,Object(a.jsx)("br",{}),Object(a.jsx)("div",{className:"topicName-"+s,style:{backgroundColor:e.color},children:e.topic})]}),Object(a.jsxs)("div",{className:"col-4 postInfo",children:[Object(a.jsx)("i",{className:"fas fa-calendar-week"}),c===n?" \u0441\u0435\u0433\u043e\u0434\u043d\u044f":" ".concat(n),Object(a.jsx)("br",{}),Object(a.jsx)("i",{className:"fas fa-eye"})," ",e.likes]})]})}),Object(a.jsx)("div",{className:"postText-"+s,style:{backgroundColor:o},dangerouslySetInnerHTML:{__html:i}}),Object(a.jsx)("a",{className:"linkStyle",href:"https://vk.com/call?id=".concat(e.user_id),target:"_blank",rel:"noopener noreferrer",children:Object(a.jsx)("div",{className:"postMsgBtn-"+s,style:{backgroundColor:o},children:Object(a.jsx)("i",{className:"fas fa-phone"})})}),Object(a.jsx)("a",{className:"linkStyle",href:e.url,target:"_blank",rel:"noopener noreferrer",children:Object(a.jsx)("div",{className:"postLikeBtn-"+s,style:{backgroundColor:o},onClick:t.likePost,children:Object(a.jsx)("i",{className:"fas fa-comment"})})})]})}}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{})]})}}]),s}(i.a.Component)),g=(s(22),function(t){Object(d.a)(s,t);var e=Object(p.a)(s);function s(t){var a;return Object(r.a)(this,s),(a=e.call(this,t)).state={posts:a.props.posts,savedPosts:[],checkedTopics:[],show:!1,postsLoad:!0,justUploaded:!1},a.offset=35,a.currOffset=0,a.group_id=140403026,a.post_id=a.props.topic_id,a.lastComm=0,a.getPosts=a.getPosts.bind(Object(h.a)(a)),a.loadPosts=a.loadPosts.bind(Object(h.a)(a)),a.updatePosts=a.updatePosts.bind(Object(h.a)(a)),a.shareTopic=a.shareTopic.bind(Object(h.a)(a)),a.getTopics=a.getTopics.bind(Object(h.a)(a)),a.checkTopic=a.checkTopic.bind(Object(h.a)(a)),a.uncheckTopic=a.uncheckTopic.bind(Object(h.a)(a)),a.uncheckAllTopics=a.uncheckAllTopics.bind(Object(h.a)(a)),a.getPostLikes=a.getPostLikes.bind(Object(h.a)(a)),a}return Object(l.a)(s,[{key:"componentDidMount",value:function(){this.setState({show:!0}),this.getPostLikes(),this.updatePosts()}},{key:"componentWillUnmount",value:function(){this.setState({show:!1})}},{key:"componentDidUpdate",value:function(){this.props.load&&(this.loadPosts(),this.props.stopLoad())}},{key:"getTopics",value:function(){var t=this,e=this.state.checkedTopics;return x.map((function(s,o){var i=e.includes(s.title);return Object(a.jsxs)("div",{className:"btnInfo",style:i?{backgroundColor:s.color}:{backgroundColor:"rgba(37, 37, 51)",color:"#b9bfff"},onClick:function(){return i?t.uncheckTopic(s.title):t.checkTopic(s.title)},children:[Object(a.jsx)("i",{className:s.icon})," ",s.title]},s.title)}))}},{key:"checkTopic",value:function(t){var e=this.state.checkedTopics;e.unshift(t),this.setState({checkedTopics:e})}},{key:"uncheckTopic",value:function(t){var e=this.state.checkedTopics;e.splice(e.findIndex((function(e){return e===t})),1),this.setState({checkedTopics:e})}},{key:"uncheckAllTopics",value:function(){this.setState({checkedTopics:[]})}},{key:"getPostLikes",value:function(){var t=this;b.a.send("VKWebAppStorageGet",{keys:["may-friends"]}).then((function(e){var s=e.keys[0].value.split(",");t.setState({savedPosts:s})}))}},{key:"loadPosts",value:function(){var t=this;this.currOffset>100||(this.setState({postsLoad:!0}),b.a.send("VKWebAppGetAuthToken",{app_id:7738603,scope:"wall"}).then((function(e){var s=e.access_token;b.a.send("VKWebAppCallAPIMethod",{method:"wall.getComments",params:{owner_id:"-"+t.group_id,post_id:t.post_id,start_comment_id:t.lastComm,count:t.offset,sort:"desc",v:"5.126",access_token:s}}).then((function(e){var s=e.response.items,a=[];if(s.length){for(var o=0;o<s.length;o++){var i=JSON.parse(s[o].text),c={};c.id=s[o].id,c.date=s[o].date,c.text=i.form,c.likes=s[o].thread.count,c.name=i.user.name,c.url=i.user.url,c.user_id=i.user.id,c.photo=i.user.photo,c.color=i.color,c.topic=i.topic,a.push(c),o===s.length-1&&(t.lastComm=s[o].id-1)}t.setState({posts:[].concat(Object(k.a)(t.state.posts),a),postsLoad:!1},(function(){t.props.setPosts(t.state.posts)}))}})).catch((function(e){console.log("it's ok"),t.setState({postsLoad:!1})}))})),this.currOffset+=this.offset)}},{key:"getPosts",value:function(){var t=this,e=this.state.checkedTopics;return this.props.posts.map((function(s,o){return Object(a.jsx)("div",{children:!e.length||e.includes(s.topic)?Object(a.jsx)(y,{data:s,index:o,user:t.props.user,savedPosts:t.state.savedPosts}):Object(a.jsx)("div",{})},s.topic+o)}))}},{key:"updatePosts",value:function(){var t=this;this.lastComm=0,this.setState({posts:[],postsLoad:!0,justUploaded:!0},(function(){t.props.setPosts(t.state.posts)})),this.loadPosts(),setTimeout((function(){t.setState({justUploaded:!1})}),6e4)}},{key:"shareTopic",value:function(){b.a.send("VKWebAppShare",{link:"https://vk.com/app7738603#"+this.props.data.url})}},{key:"render",value:function(){var t=this,e=this.getPosts(),s=this.state.postsLoad,o=this.state.justUploaded,i=this.state.checkedTopics,c=this.getTopics();return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"headerLineBot",children:c}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{className:"shareTopicBtn",style:o?{opacity:"0.5"}:{},onClick:function(){o||t.updatePosts()},children:Object(a.jsx)("i",{className:"fas fa-redo-alt"})}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{className:"shareTopicBtn",hidden:!i.length,onClick:this.uncheckAllTopics,children:"\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435"}),Object(a.jsx)("hr",{}),e,Object(a.jsxs)("div",{className:"Loading",hidden:!s,children:[Object(a.jsx)("div",{className:"spinner-border",role:"status"})," ",Object(a.jsx)("span",{className:"LoadingText",children:"\u0441\u0435\u043a\u0443\u043d\u0434\u043e\u0447\u043a\u0443..."})]}),Object(a.jsx)("br",{}),Object(a.jsx)("hr",{})]})}}]),s}(i.a.Component)),N=[{text:"\u041c\u043d\u043e\u0433\u043e \u043a\u043b\u0430\u0441\u0441\u043d\u044b\u0445 \u043b\u044e\u0434\u0435\u0439, \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u043e\u0435 \u043e\u0431\u0449\u0435\u043d\u0438\u0435",title:"\u0413\u043e\u0441\u0442\u0438\u043d\u0430\u044f \u041c\u0430\u044f *",url:"https://vk.me/join/2vJjlsqmTNLzvDYO/HQaBPgRmw6j1siAgNU=",color:"#F0CCAA"},{text:"\u0415\u0449\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0438 \u043a\u043b\u0430\u0441\u0441\u043d\u044b\u0445 \u043b\u044e\u0434\u0435\u0439",title:"\u0413\u043e\u0441\u0442\u0438\u043d\u0430\u044f \u041c\u0430\u044f **",url:"https://vk.me/join/zaSAws6otA80gTrY2SETG5yXyPStJXAZho0=",color:"#84ACED"},{text:"\u0412 \u044d\u0442\u043e\u0439 \u0431\u0435\u0441\u0435\u0434\u0435 \u0442\u044b \u0432\u0441\u0435\u0433\u0434\u0430 \u0441\u043c\u043e\u0436\u0435\u0448\u044c \u043d\u0430\u0439\u0442\u0438 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0443 \u0438 \u043f\u043e\u043f\u0440\u043e\u0441\u0438\u0442\u044c \u0441\u043e\u0432\u0435\u0442",title:"\u0411\u0435\u0441\u0435\u0434\u0430 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438",url:"https://vk.me/join/DIuOFhWBRqjFGasjonZm2lvPc9iav9sjPdQ=",color:"#E4B6B1"},{text:"\u0411\u0435\u0441\u0435\u0434\u0430, \u0433\u0434\u0435 \u043a\u0430\u0436\u0434\u044b\u0439 \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f \u0441\u0432\u043e\u0435\u0439 \u043b\u044e\u0431\u0438\u043c\u043e\u0439 \u043f\u0435\u0441\u043d\u0435\u0439 \u0438 \u043d\u0430\u0439\u0442\u0438 \u0434\u043b\u044f \u0441\u0435\u0431\u044f \u0447\u0442\u043e-\u043d\u0438\u0431\u0443\u0434\u044c \u043d\u043e\u0432\u0435\u043d\u044c\u043a\u043e\u0435",title:"\u041c\u0443\u0437\u044b\u043a\u0430\u043b\u044c\u043d\u0430\u044f \u0431\u0435\u0441\u0435\u0434\u0430",url:"https://vk.me/join/FAo2ANp5R1v3_06Ve78hkHpsQzpNehEGFP4=",color:"#C99AE1"}],P=(s(38),function(t){Object(d.a)(s,t);var e=Object(p.a)(s);function s(t){var a;return Object(r.a)(this,s),(a=e.call(this,t)).state={},a.getChats=a.getChats.bind(Object(h.a)(a)),a}return Object(l.a)(s,[{key:"getChats",value:function(){return N.map((function(t,e){return Object(a.jsx)("div",{children:Object(a.jsx)("div",{className:"chatView",style:{backgroundColor:t.color},children:Object(a.jsxs)("div",{className:"picBlackout",children:[Object(a.jsx)("div",{className:"chatTitle",children:t.title}),Object(a.jsx)("div",{className:"chatText",children:t.text}),Object(a.jsx)("a",{className:"linkStyle",href:t.url,target:"_blank",rel:"noopener noreferrer",children:Object(a.jsx)("button",{className:"chatComeInBtn",style:{borderColor:t.color},children:Object(a.jsx)("span",{style:{color:t.color},children:"\u0432\u043e\u0439\u0442\u0438"})})})]})})},t.title+e)}))}},{key:"render",value:function(){var t=this.getChats();return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"infoText",children:"\u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u044f\u0439\u0441\u044f \u043a \u043c\u0430\u0439\u0441\u043a\u0438\u043c \u0431\u0435\u0441\u0435\u0434\u0430\u043c"}),t]})}}]),s}(i.a.Component)),S=function(t){Object(d.a)(s,t);var e=Object(p.a)(s);function s(t){var a;return Object(r.a)(this,s),(a=e.call(this,t)).state={posts:[],headerStyles:{},modalStyles:{},modalForm:"",show:!1,submitUserForm:{id:"",name:"",photo:"",url:""},submitUserData:{},currForm:{},formValid:!1,load:!1,scroll:!1},a.topic_id=798,a.topicName="",a.closeRef=i.a.createRef(),a.token="f97761ee8a2f12188b1a52d0c7f149ddbeb68151e0dc71c91d945a04eac7f0d0aef3bb0cdbcfe5293ef47",a.group_id=140403026,a.submitUserPost=a.submitUserPost.bind(Object(h.a)(a)),a.getHeaderStyle=a.getHeaderStyle.bind(Object(h.a)(a)),a.showAnimation=a.showAnimation.bind(Object(h.a)(a)),a.setModalForm=a.setModalForm.bind(Object(h.a)(a)),a.saveForm=a.saveForm.bind(Object(h.a)(a)),a.getUserData=a.getUserData.bind(Object(h.a)(a)),a.stopLoad=a.stopLoad.bind(Object(h.a)(a)),a.startLoad=a.startLoad.bind(Object(h.a)(a)),a.PostsLoader=a.PostsLoader.bind(Object(h.a)(a)),a.openMainApp=a.openMainApp.bind(Object(h.a)(a)),a.getTopicForm=a.getTopicForm.bind(Object(h.a)(a)),a}return Object(l.a)(s,[{key:"componentDidMount",value:function(){this.getUserData(),setTimeout((function(){b.a.send("VKWebAppJoinGroup",{group_id:160404048})}),1e4),this.setState({headerStyles:this.getHeaderStyle()})}},{key:"showAnimation",value:function(){var t=this.state.show;this.setState({show:!t})}},{key:"getHeaderStyle",value:function(){var t=window.location.search.slice(1);return"mobile_iphone"===j.a.parse(t).vk_platform?{header:{height:"70px",paddingTop:"30px"},headerLineBot:{top:"70px"},body:{top:"70px",height:"calc(100% - 125px)"},collapse:{height:"calc(100% - 120px)",top:"70px"}}:{}}},{key:"getTopicForm",value:function(t,e){var s,o=this,i={};return s=t.map((function(t,e){return i[t.title]="",Object(a.jsxs)("div",{className:"postForm",children:[Object(a.jsx)("div",{className:"inputTitle",children:t.title}),"textarea"===t.type?Object(a.jsx)("textarea",{className:"inputText",placeholder:t.hint,rows:t.rows,onChange:function(e){return o.saveForm(t.title,e)}}):Object(a.jsx)("input",{className:"inputStr",placeholder:t.hint,onChange:function(e){return o.saveForm(t.title,e)}})]},e)})),this.setState({currForm:i}),this.topicName=e,Object(a.jsx)("div",{children:s})}},{key:"getTopics",value:function(){var t=this;return x.map((function(e,s){return Object(a.jsx)(O.a,{in:t.state.show,timeout:100+150*s,children:function(s){return Object(a.jsxs)("div",{className:"btnInfo-"+s,style:{backgroundColor:e.color},"data-toggle":"modal","data-target":"#postModal",onClick:function(){return t.setModalForm(t.getTopicForm(e.form,e.title),{color:e.color})},children:[Object(a.jsx)("i",{className:e.icon})," ",e.title]})}},s)}))}},{key:"setModalText",value:function(t){this.setState({testInfo:t})}},{key:"setModalForm",value:function(t,e){this.setState({modalForm:t,modalStyles:e})}},{key:"saveForm",value:function(t,e){var s=this.state.currForm;s[t]=e.target.value,this.setState({submitUserData:s})}},{key:"getUserData",value:function(){var t=this;b.a.send("VKWebAppGetUserInfo").then((function(e){t.setState({submitUserForm:{id:e.id,name:e.first_name,photo:e.photo_100,url:"https://vk.com/id".concat(e.id)}})}))}},{key:"submitUserPost",value:function(){var t=this,e={form:this.state.submitUserData,user:this.state.submitUserForm,color:this.state.modalStyles.color,topic:this.topicName};b.a.send("VKWebAppCallAPIMethod",{method:"wall.createComment",params:{owner_id:"-"+this.group_id,post_id:this.topic_id,message:JSON.stringify(e),from_group:this.group_id,v:"5.126",access_token:this.token}}).then((function(s){t.setState({submitUserData:{},currForm:{},modalForm:""}),t.topicName="";var a={},o=t.state.posts;a.id=s.response.comment_id,a.text=e.form,a.name=e.user.name,a.url=e.user.url,a.user_id=e.user.id,a.photo=e.user.photo,a.color=e.color,a.topic=e.topic,o.unshift(a),t.setState({posts:o},(function(){t.closeRef.current.click()}))}))}},{key:"stopLoad",value:function(){this.setState({load:!1})}},{key:"startLoad",value:function(){this.setState({scroll:!0})}},{key:"PostsLoader",value:function(){var t=document.getElementById("contentWindow"),e=t.scrollHeight,s=t.scrollTop;this.currPercent=100*s/(e-700),this.currPercent<=70&&this.startLoad(),this.state.scroll&&this.currPercent>=70&&this.setState({load:!0,scroll:!1})}},{key:"openMainApp",value:function(){b.a.send("VKWebAppOpenApp",{app_id:7646928})}},{key:"render",value:function(){var t=this,e=this.state.headerStyles,s=this.state.modalForm,o=this.getTopics(),i=this.state.show;return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"modal fade",id:"postModal",tabIndex:"-1",role:"dialog","aria-hidden":"true",children:Object(a.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-dialog-scrollable",children:Object(a.jsxs)("div",{className:"modal-content",style:{backgroundColor:this.state.modalStyles.color},children:[Object(a.jsxs)("div",{className:"modal-header",children:[Object(a.jsx)("h5",{className:"modal-title",children:"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u044c"}),Object(a.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(a.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(a.jsx)("div",{className:"modal-body",children:s}),Object(a.jsx)("div",{className:"modal-footer",children:Object(a.jsx)("div",{className:"submitBtn","data-dismiss":"modal",onClick:this.submitUserPost,children:"\u043e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c"})})]})})}),Object(a.jsxs)("div",{className:"Header",style:e.header,children:[Object(a.jsx)("span",{className:"titleMark",onClick:this.openMainApp,children:"\u041c\u03b1\xfa"})," ",Object(a.jsx)("span",{className:"titleApp",children:"\u0444\u0440\u0435\u043d\u0434\u0441"})]}),Object(a.jsxs)("div",{className:"collapse navbar-collapse",style:e.collapse,id:"navbarNavDropdown",children:[Object(a.jsx)("div",{className:"infoTitle",children:"\u0432\u044b\u0431\u0435\u0440\u0438 \u0442\u0435\u043c\u0430\u0442\u0438\u043a\u0443"}),Object(a.jsx)("br",{}),o]}),Object(a.jsxs)("div",{id:"contentWindow",className:"Body",style:e.body,onScroll:this.PostsLoader,children:[Object(a.jsx)(f.a,{children:Object(a.jsxs)(v.c,{children:[Object(a.jsx)(v.a,{exact:!0,path:"/",children:Object(a.jsx)(g,{user:this.state.submitUserForm,topic_id:this.topic_id,posts:this.state.posts,topics:o,setPosts:function(e){return t.setState({posts:e})},load:this.state.load,stopLoad:this.stopLoad,startLoad:this.startLoad})}),Object(a.jsx)(v.a,{exact:!0,path:"/chats",children:Object(a.jsx)(P,{})})]})}),Object(a.jsx)("a",{href:"https://vk.com/warmay",className:"linkStyle",target:"_blank",rel:"noopener noreferrer",children:Object(a.jsx)("div",{className:"copyrightText",children:"\u041c\u0430\u0439"})})]}),Object(a.jsx)("div",{className:"footer",children:Object(a.jsxs)(f.a,{children:[i?"":Object(a.jsx)(f.b,{className:"linkStyle",to:"/",children:Object(a.jsx)("div",{className:"btnFooter",children:Object(a.jsx)("i",{className:"fas fa-icons"})})}),Object(a.jsx)("div",{className:"btnFooterMain","data-toggle":"collapse","data-target":"#navbarNavDropdown",onClick:function(){t.showAnimation(),t.setState({submitUserData:{},currForm:{},modalForm:""}),t.topicName=""},children:i?Object(a.jsx)("i",{className:"fas fa-times",ref:this.closeRef}):Object(a.jsx)("i",{className:"fas fa-pencil-alt"})}),i?"":Object(a.jsx)(f.b,{className:"linkStyle",to:"/chats",children:Object(a.jsx)("div",{className:"btnFooter",children:Object(a.jsx)("i",{className:"fas fa-comments"})})})]})})]})}}]),s}(i.a.Component),w=function(t){Object(d.a)(s,t);var e=Object(p.a)(s);function s(t){var a;return Object(r.a)(this,s),(a=e.call(this,t)).state={},a}return Object(l.a)(s,[{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsx)(S,{})})}}]),s}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));b.a.send("VKWebAppInit",{}),n.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(w,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[42,1,2]]]);
//# sourceMappingURL=main.472a00b6.chunk.js.map